easyblock = 'CargoPythonPackage'

name = 'SnapATAC2'
version = '2.3.0'

homepage = 'https://github.com/kaizhang/SnapATAC2'
description = "Single-cell epigenomics analysis tools"

toolchain = {'name': 'foss', 'version': '2022a'}

crates = [
    ('adler', '1.0.2'),
    ('ahash', '0.8.3'),
    ('aho-corasick', '1.0.1'),
    ('android_system_properties', '0.1.5'),
    ('anyhow', '1.0.71'),
    ('approx', '0.4.0'),
    ('approx', '0.5.1'),
    ('arc-swap', '1.6.0'),
    ('arrow2', '0.15.0'),
    ('ascii', '1.1.0'),
    ('attohttpc', '0.18.0'),
    ('atty', '0.2.14'),
    ('autocfg', '1.1.0'),
    ('bigtools', '0.1.11'),
    ('bincode', '1.3.3'),
    ('bio', '0.39.2'),
    ('bio-types', '0.13.0'),
    ('bit-set', '0.5.3'),
    ('bit-vec', '0.5.1'),
    ('bit-vec', '0.6.3'),
    ('bitflags', '1.3.2'),
    ('bumpalo', '3.12.1'),
    ('bv', '0.11.1'),
    ('bytecount', '0.6.3'),
    ('bytemuck', '1.13.1'),
    ('bytemuck_derive', '1.4.1'),
    ('byteorder', '1.4.3'),
    ('byteordered', '0.6.0'),
    ('bytes', '1.4.0'),
    ('camino', '1.1.4'),
    ('cargo-platform', '0.1.2'),
    ('cargo_metadata', '0.14.2'),
    ('cc', '1.0.79'),
    ('cfg-if', '1.0.0'),
    ('chrono', '0.4.24'),
    ('clap', '3.2.25'),
    ('clap_lex', '0.2.4'),
    ('cmake', '0.1.50'),
    ('codespan-reporting', '0.11.1'),
    ('comfy-table', '6.1.4'),
    ('console', '0.15.5'),
    ('const-random', '0.1.15'),
    ('const-random-macro', '0.1.15'),
    ('core-foundation', '0.9.3'),
    ('core-foundation-sys', '0.8.4'),
    ('crc32fast', '1.3.2'),
    ('crossbeam-channel', '0.5.8'),
    ('crossbeam-deque', '0.8.3'),
    ('crossbeam-epoch', '0.9.14'),
    ('crossbeam-utils', '0.8.15'),
    ('crossterm', '0.25.0'),
    ('crossterm_winapi', '0.9.0'),
    ('crunchy', '0.2.2'),
    ('csv', '1.2.1'),
    ('csv-core', '0.1.10'),
    ('ctor', '0.2.0'),
    ('custom_derive', '0.1.7'),
    ('cxx', '1.0.94'),
    ('cxx-build', '1.0.94'),
    ('cxxbridge-flags', '1.0.94'),
    ('cxxbridge-macro', '1.0.94'),
    ('derive-new', '0.5.9'),
    ('dirs', '4.0.0'),
    ('dirs-sys', '0.3.7'),
    ('displaydoc', '0.1.7'),
    ('downcast-rs', '1.2.0'),
    ('dyn-clone', '1.0.11'),
    ('either', '1.8.1'),
    ('encode_unicode', '0.3.6'),
    ('enum-map', '1.1.1'),
    ('enum-map-derive', '0.6.0'),
    ('enum_dispatch', '0.3.11'),
    ('errno', '0.3.1'),
    ('errno-dragonfly', '0.1.2'),
    ('error-chain', '0.12.4'),
    ('ethnum', '1.3.2'),
    ('extsort', '0.4.2'),
    ('fastrand', '1.9.0'),
    ('feature-probe', '0.1.1'),
    ('fixedbitset', '0.4.2'),
    ('flate2', '1.0.26'),
    ('fnv', '1.0.7'),
    ('foreign-types', '0.3.2'),
    ('foreign-types-shared', '0.1.1'),
    ('foreign_vec', '0.1.0'),
    ('form_urlencoded', '1.1.0'),
    ('futures', '0.3.28'),
    ('futures-channel', '0.3.28'),
    ('futures-core', '0.3.28'),
    ('futures-executor', '0.3.28'),
    ('futures-io', '0.3.28'),
    ('futures-macro', '0.3.28'),
    ('futures-sink', '0.3.28'),
    ('futures-task', '0.3.28'),
    ('futures-util', '0.3.28'),
    ('fxhash', '0.2.1'),
    ('getrandom', '0.2.9'),
    ('getset', '0.1.2'),
    ('ghost', '0.1.9'),
    ('glob', '0.3.1'),
    ('hash_hasher', '2.0.3'),
    ('hashbrown', '0.12.3'),
    ('hashbrown', '0.13.2'),
    ('hdf5', '0.8.1'),
    ('hdf5-derive', '0.8.1'),
    ('hdf5-src', '0.8.1'),
    ('hdf5-sys', '0.8.1'),
    ('hdf5-types', '0.8.1'),
    ('heck', '0.3.3'),
    ('heck', '0.4.1'),
    ('hermit-abi', '0.1.19'),
    ('hermit-abi', '0.2.6'),
    ('hermit-abi', '0.3.1'),
    ('hora', '0.1.1'),
    ('http', '0.2.9'),
    ('iana-time-zone', '0.1.56'),
    ('iana-time-zone-haiku', '0.1.1'),
    ('idna', '0.3.0'),
    ('indexmap', '1.9.3'),
    ('indicatif', '0.17.3'),
    ('indoc', '1.0.9'),
    ('instant', '0.1.12'),
    ('inventory', '0.3.5'),
    ('io-lifetimes', '1.0.10'),
    ('itertools', '0.8.2'),
    ('itertools', '0.10.5'),
    ('itertools-num', '0.1.3'),
    ('itoa', '1.0.6'),
    ('js-sys', '0.3.61'),
    ('kdtree', '0.6.0'),
    ('lazy_static', '1.4.0'),
    ('lexical', '6.1.1'),
    ('lexical-core', '0.8.5'),
    ('lexical-parse-float', '0.8.5'),
    ('lexical-parse-integer', '0.8.6'),
    ('lexical-util', '0.8.5'),
    ('lexical-write-float', '0.8.5'),
    ('lexical-write-integer', '0.8.5'),
    ('libc', '0.2.142'),
    ('libdeflate-sys', '0.7.5'),
    ('libdeflater', '0.7.5'),
    ('libloading', '0.7.4'),
    ('libm', '0.2.6'),
    ('libz-sys', '1.1.9'),
    ('linfa', '0.6.1'),
    ('linfa-clustering', '0.6.1'),
    ('linfa-linalg', '0.1.0'),
    ('linfa-nn', '0.6.1'),
    ('link-cplusplus', '1.0.8'),
    ('linreg', '0.2.0'),
    ('linux-raw-sys', '0.3.7'),
    ('lock_api', '0.4.9'),
    ('log', '0.4.17'),
    ('matrixmultiply', '0.3.7'),
    ('memchr', '2.5.0'),
    ('memmap2', '0.5.10'),
    ('memoffset', '0.8.0'),
    ('miniz_oxide', '0.7.1'),
    ('mio', '0.8.6'),
    ('multimap', '0.8.3'),
    ('multiversion', '0.6.1'),
    ('multiversion-macros', '0.6.1'),
    ('nalgebra', '0.27.1'),
    ('nalgebra', '0.29.0'),
    ('nalgebra', '0.32.2'),
    ('nalgebra-macros', '0.1.0'),
    ('nalgebra-macros', '0.2.0'),
    ('nalgebra-sparse', '0.9.0'),
    ('native-tls', '0.2.11'),
    ('ndarray', '0.15.6'),
    ('ndarray-rand', '0.14.0'),
    ('ndarray-stats', '0.5.1'),
    ('newtype_derive', '0.1.6'),
    ('noisy_float', '0.2.0'),
    ('noodles', '0.34.0'),
    ('noodles-bam', '0.28.0'),
    ('noodles-bgzf', '0.20.0'),
    ('noodles-core', '0.11.0'),
    ('noodles-csi', '0.14.0'),
    ('noodles-fasta', '0.20.0'),
    ('noodles-gff', '0.11.0'),
    ('noodles-gtf', '0.8.0'),
    ('noodles-sam', '0.25.0'),
    ('now', '0.1.3'),
    ('num', '0.4.0'),
    ('num-bigint', '0.4.3'),
    ('num-complex', '0.4.3'),
    ('num-integer', '0.1.45'),
    ('num-iter', '0.1.43'),
    ('num-rational', '0.4.1'),
    ('num-traits', '0.2.15'),
    ('num_cpus', '1.15.0'),
    ('number_prefix', '0.4.0'),
    ('numpy', '0.18.0'),
    ('once_cell', '1.17.1'),
    ('openssl', '0.10.52'),
    ('openssl-macros', '0.1.1'),
    ('openssl-probe', '0.1.5'),
    ('openssl-sys', '0.9.87'),
    ('order-stat', '0.1.3'),
    ('ordered-float', '1.1.1'),
    ('os_str_bytes', '6.5.0'),
    ('parking_lot', '0.11.2'),
    ('parking_lot', '0.12.1'),
    ('parking_lot_core', '0.8.6'),
    ('parking_lot_core', '0.9.7'),
    ('partitions', '0.2.4'),
    ('paste', '1.0.12'),
    ('percent-encoding', '2.2.0'),
    ('permutation', '0.4.1'),
    ('petgraph', '0.6.3'),
    ('pin-project-lite', '0.2.9'),
    ('pin-utils', '0.1.0'),
    ('pkg-config', '0.3.27'),
    ('polars', '0.26.1'),
    ('polars-arrow', '0.26.1'),
    ('polars-core', '0.26.1'),
    ('polars-io', '0.26.1'),
    ('polars-lazy', '0.26.1'),
    ('polars-ops', '0.26.1'),
    ('polars-pipe', '0.26.1'),
    ('polars-plan', '0.26.1'),
    ('polars-time', '0.26.1'),
    ('polars-utils', '0.26.1'),
    ('portable-atomic', '0.3.19'),
    ('ppv-lite86', '0.2.17'),
    ('proc-macro-error', '1.0.4'),
    ('proc-macro-error-attr', '1.0.4'),
    ('proc-macro-hack', '0.5.20+deprecated'),
    ('proc-macro2', '1.0.56'),
    ('pulldown-cmark', '0.9.2'),
    ('pyo3', '0.18.3'),
    ('pyo3-build-config', '0.18.3'),
    ('pyo3-ffi', '0.18.3'),
    ('pyo3-log', '0.8.1'),
    ('pyo3-macros', '0.18.3'),
    ('pyo3-macros-backend', '0.18.3'),
    ('quote', '1.0.26'),
    ('rand', '0.8.5'),
    ('rand_chacha', '0.3.1'),
    ('rand_core', '0.6.4'),
    ('rand_distr', '0.4.3'),
    ('rand_isaac', '0.3.0'),
    ('rand_xoshiro', '0.6.0'),
    ('rawpointer', '0.2.1'),
    ('rayon', '1.7.0'),
    ('rayon-core', '1.11.0'),
    ('redox_syscall', '0.2.16'),
    ('redox_syscall', '0.3.5'),
    ('redox_users', '0.4.3'),
    ('regex', '1.8.1'),
    ('regex-syntax', '0.7.1'),
    ('replace_with', '0.1.7'),
    ('rustc-hash', '1.1.0'),
    ('rustc_version', '0.1.7'),
    ('rustc_version', '0.4.0'),
    ('rustix', '0.37.19'),
    ('rustversion', '1.0.12'),
    ('ryu', '1.0.13'),
    ('safe_arch', '0.6.0'),
    ('same-file', '1.0.6'),
    ('schannel', '0.1.21'),
    ('scopeguard', '1.1.0'),
    ('scratch', '1.0.5'),
    ('security-framework', '2.8.2'),
    ('security-framework-sys', '2.8.0'),
    ('semver', '0.1.20'),
    ('semver', '1.0.17'),
    ('serde', '1.0.160'),
    ('serde_derive', '1.0.160'),
    ('serde_json', '1.0.96'),
    ('signal-hook', '0.3.15'),
    ('signal-hook-mio', '0.2.3'),
    ('signal-hook-registry', '1.4.1'),
    ('simba', '0.5.1'),
    ('simba', '0.6.0'),
    ('simba', '0.8.1'),
    ('simdutf8', '0.1.4'),
    ('skeptic', '0.13.7'),
    ('slab', '0.4.8'),
    ('smallvec', '1.10.0'),
    ('smartstring', '1.0.1'),
    ('space', '0.12.1'),
    ('static_assertions', '1.1.0'),
    ('statrs', '0.15.0'),
    ('statrs', '0.16.0'),
    ('strength_reduce', '0.2.4'),
    ('strsim', '0.10.0'),
    ('strum', '0.23.0'),
    ('strum', '0.24.1'),
    ('strum_macros', '0.23.1'),
    ('strum_macros', '0.24.3'),
    ('syn', '1.0.109'),
    ('syn', '2.0.15'),
    ('target-lexicon', '0.12.7'),
    ('tempfile', '3.5.0'),
    ('termcolor', '1.2.0'),
    ('textwrap', '0.16.0'),
    ('thiserror', '1.0.40'),
    ('thiserror-impl', '1.0.40'),
    ('tikv-jemalloc-sys', '0.5.3+5.3.0-patched'),
    ('tikv-jemallocator', '0.5.0'),
    ('time', '0.1.45'),
    ('tiny-keccak', '2.0.2'),
    ('tinyvec', '1.6.0'),
    ('tinyvec_macros', '0.1.1'),
    ('triple_accel', '0.4.0'),
    ('typenum', '1.16.0'),
    ('unicase', '2.6.0'),
    ('unicode-bidi', '0.3.13'),
    ('unicode-ident', '1.0.8'),
    ('unicode-normalization', '0.1.22'),
    ('unicode-segmentation', '1.10.1'),
    ('unicode-width', '0.1.10'),
    ('unindent', '0.1.11'),
    ('url', '2.3.1'),
    ('vcpkg', '0.2.15'),
    ('vec_map', '0.8.2'),
    ('version_check', '0.9.4'),
    ('walkdir', '2.3.3'),
    ('wasi', '0.10.0+wasi-snapshot-preview1'),
    ('wasi', '0.11.0+wasi-snapshot-preview1'),
    ('wasm-bindgen', '0.2.84'),
    ('wasm-bindgen-backend', '0.2.84'),
    ('wasm-bindgen-macro', '0.2.84'),
    ('wasm-bindgen-macro-support', '0.2.84'),
    ('wasm-bindgen-shared', '0.2.84'),
    ('which', '4.4.0'),
    ('wide', '0.7.8'),
    ('wildmatch', '2.1.1'),
    ('winapi', '0.3.9'),
    ('winapi-i686-pc-windows-gnu', '0.4.0'),
    ('winapi-util', '0.1.5'),
    ('winapi-x86_64-pc-windows-gnu', '0.4.0'),
    ('windows', '0.48.0'),
    ('windows-sys', '0.42.0'),
    ('windows-sys', '0.45.0'),
    ('windows-sys', '0.48.0'),
    ('windows-targets', '0.42.2'),
    ('windows-targets', '0.48.0'),
    ('windows_aarch64_gnullvm', '0.42.2'),
    ('windows_aarch64_gnullvm', '0.48.0'),
    ('windows_aarch64_msvc', '0.42.2'),
    ('windows_aarch64_msvc', '0.48.0'),
    ('windows_i686_gnu', '0.42.2'),
    ('windows_i686_gnu', '0.48.0'),
    ('windows_i686_msvc', '0.42.2'),
    ('windows_i686_msvc', '0.48.0'),
    ('windows_x86_64_gnu', '0.42.2'),
    ('windows_x86_64_gnu', '0.48.0'),
    ('windows_x86_64_gnullvm', '0.42.2'),
    ('windows_x86_64_gnullvm', '0.48.0'),
    ('windows_x86_64_msvc', '0.42.2'),
    ('windows_x86_64_msvc', '0.48.0'),
    ('winreg', '0.10.1'),
    ('xxhash-rust', '0.8.6'),
]

sources = [{
    'source_urls': ['https://github.com/kaizhang/SnapATAC2/archive/refs/tags/'],
    'download_filename': 'v%(version)s.tar.gz',
    'filename': SOURCE_TAR_GZ
}]
checksums = [
    {'SnapATAC2-2.3.0.tar.gz': '5c8a7dc14546086d1bb11a080b30a5ea9bf9ac142fd7870c73ebc0fb3a48e06e'},
]

builddependencies = [
    ('Rust', '1.65.0'),
    ('CMake', '3.24.3'),
]

dependencies = [
    ('Python', '3.10.4'),
    # ('python-igraph', '0.9.8'),
    # ('scikit-learn', '1.0.2'),
    ('umap-learn', '0.5.3'),
    ('pyfaidx', '0.7.1'),
    ('tqdm', '4.64.0'),
    ('rustworkx', '0.12.1'),
]

start_dir = 'snapatac2-python'

offline = False  # vendoring of git sources not supported in Cargo easyblock yet
download_dep_fail = True
use_pip = True
sanity_pip_check = True

moduleclass = 'lib'
